import{u as h,q as g,o as x,r as l,a as b,b as f,s as P,j as m,C as w,c as a,d as v,A as C,e as y,I as A,f as S,g as j,h as E,B as N,D as i,i as R,k as p,l as k,R as d}from"./index-d9fbf823.js";const B=async()=>{const t=[],e=h(),s=g(l(e,"adminPosts"),x("createdAt"));return await new Promise(n=>{b(s,o=>{o.forEach(r=>{const c=r.val();t.push(c)}),n(t)},{onlyOnce:!0})}),t},D=async t=>{const e=t.id,s=h(),n=l(s,`adminPosts/${e}`),o=l(s,`posts/${e}`);return await new Promise(r=>{f(n).then(()=>{P(o,t).then(()=>{r("success")})})}),"success"},$=async t=>{const e=h(),s=l(e,`adminPosts/${t}`);return await new Promise(n=>{f(s).then(()=>{n("success")})}),"success"},H=t=>{if(!t)return i.EditorState.createEmpty();const e=JSON.parse(t),s=i.convertFromRaw(e);return i.EditorState.createWithContent(s)};function I(t){var r,c,u;const{post:e,removePostCB:s}=t,n=()=>{D(e).then(()=>{s(e.id),alert("Post approved!")})},o=()=>{e.id&&$(e.id).then(()=>{s(e.id),alert("Post rejected!")})};return m(w,{sx:{maxWidth:500,width:"100%",marginX:"12px",marginY:"8px"},children:[a(v,{avatar:a(C,{sx:{bgcolor:"#70709e"},"aria-label":"recipe",children:(r=e.collegeData)!=null&&r.logo?a("img",{src:(c=e.collegeData)==null?void 0:c.logo,alt:"college logo",className:"w-8 h-8"}):a(y,{})}),action:a(A,{"aria-label":"settings",children:a(S,{})}),title:(u=e.collegeData)==null?void 0:u.name,subheader:j(e.createdAt)}),a(E,{sx:{marginTop:"-6px"},className:"border-y-2",children:a(N,{sx:{marginX:"-8px",marginY:"-10px",fontSize:"18px"},className:"p-2 bg-gray-100 rounded-lg",children:a(i.Editor,{editorState:H(e.confession),onChange:()=>{},readOnly:!0})})}),m(R,{disableSpacing:!0,children:[a(p,{variant:"contained",color:"success",onClick:n,children:"Approve"}),a(p,{color:"error",sx:{marginLeft:"12px"},onClick:o,children:"Reject"})]})]})}function Y(){const{id:t}=k(),[e,s]=d.useState([]);d.useEffect(()=>{(()=>{t!=="991811"&&(alert("You are not authorized to view this page"),window.location.href="/")})()},[t]),d.useEffect(()=>{(()=>{try{B().then(r=>{s(r)})}catch(r){console.log(r)}})()},[]);const n=o=>{s(e.filter(r=>r.id!==o))};return m("div",{className:"max-w-[calc(100vw-100px)] mx-auto bg-[#333346] rounded-xl mt-8 px-2 py-4 h-fit max-h-[calc(100vh-6.75rem)] overflow-y-scroll scroll-smooth scrollbar-thin scrollbar-track-[#b0b0d4] scrollbar-thumb-[#3e3e50] scrollbar-track-rounded-md scrollbar-thumb-rounded-md",children:[a("div",{className:"w-[100%] flex flex-wrap",children:e.map(o=>a(I,{post:o,removePostCB:n},o.id))}),a("p",{className:"text-white text-[18px] my-2",children:"No more confessionsðŸ«¡. Check back later!"})]})}export{Y as default};
